<div class="jarviswidget-editbox">
</div>
<div class="widget-body no-padding">
    <form th:object="${realmodel}" method="POST" th:action="@{/system/role/save}"
          id="realentity" class="smart-form"
          xmlns:th="http://www.thymeleaf.org">
        <fieldset>
            <div class="row">
                <section class="col col-6">
                    <label class="input"> <i class="icon-prepend fa fa-user"></i>
                        <input class="" type="text" name="name" th:field="*{name}" placeholder="角色名称"
                               data-rule-required="true" data-msg-required="请输入角色名称">
                        <b class="tooltip tooltip-bottom-right tooltip-realaicy"><span
                                class="tooltip-realaicy">请输入角色名称</span></b>
                        <input id="updateflag" name="updateflag" type="hidden" th:value="${realneworupdate}">
                        <input id="updateID" name="updateID" type="hidden" th:value="${realUpdateID}">
                        <input id="orgID" name="orgID" type="hidden" th:value="${orgID}">
                    </label>
                </section>
            </div>
        </fieldset>
        <footer>
            <button type="reset" class="btn btn-primary">
                重置数据
            </button>
            <button type="submit" class="btn btn-primary">
                提交数据
            </button>
        </footer>
    </form>


    <div class="row">
        <div class="col-sm-12">
        </div>
    </div>
</div>

<style>
    .reasu {
        background: #f0fff0;
        border-color: #7DC27D;
    }

    .temp {;
    }
</style>


<script type="text/javascript">
    pageSetUp();

    $("#realentity").validate({

        success: function (label) {
            $(label).css("color", "green");
            $(label).text('OK');
            $(label).prev().removeClass("state-error").addClass("state-success")
        },

        highlight: function (label) {
            $(label).parent().addClass("state-error").removeClass("state-success");
            $(label).parent().next().addClass("realaicy");
            $(label).parent().next().css("color", "red");
        },
        // Do not change code below
        errorPlacement: function (error, element) {
            error.insertAfter(element.parent());
        },
        debug: true,
        // Rules for form validation
        rules: {
            name: {
                required: true,
                minlength: 3,
                maxlength: 20
            }
        },
        messages: {
            name: {
                required: '请输入角色名称',
                minlength: '请至少输入3个字符',
                maxlength: '输入超过了20个字符'
            }
        },

        submitHandler: function (form) {
            if ($("#updateflag").val() == "new") {
                //console.log("newnew");
                $.ajax({
                    url: form.action,
                    type: form.method,
                    data: $(form).serialize(),
                    success: function (response) {
                        if (response.substring(0, 2) == "ok") {
                            $('#realalertinfo').text('——新建角色成功！');
                            $('#realalert').fadeTo(2000, 500).delay(5000).slideUp(500, function () {
                                //$("#realtemp_a").delay().slideUp(500);
                            });
                            $.smallBox({
                                title: "创建角色成功",
                                content: "<i class='fa fa-clock-o'></i> <i>2 seconds ago...</i>",
                                color: "#296191",
                                iconSmall: "fa fa-thumbs-up bounce animated",
                                timeout: 4000
                            });
                        }

                        else {
                            console.log(response);

                            $.SmartMessageBox({
                                title: "出错了!",
                                content: response,
                                buttons: '[确定]'
                            })
                        }
                        $('#dt_basic_real').DataTable().draw();
                    }
                });
            } else {
                console.log("editedit");
                $("#updateflag").attr("value", 'editedit');

                $.ajax({
                    url: form.action,
                    type: form.method,
                    data: $(form).serialize(),
                    success: function (response) {
                        if (response.substring(0, 2) == "ok") {
                            $('#realalertinfo').text('——修改角色成功！');
                            $('#realalert').fadeTo(2000, 500).delay(5000).slideUp(500, function () {
                                //$("#realtemp_a").delay().slideUp(500);
                            });
                            $.smallBox({
                                title: "修改成功",
                                content: "<i class='fa fa-clock-o'></i> <i>2 seconds ago...</i>",
                                color: "#296191",
                                iconSmall: "fa fa-thumbs-up bounce animated",
                                timeout: 4000
                            });
                        }

                        else {
                            $.SmartMessageBox({
                                title: "出错了!",
                                content: response,
                                buttons: '[确定]'
                            })
                        }
                        $('#dt_basic_real').DataTable().draw();
                    }
                });

            }
        }
    });

    var pagefunction = function () {

    };
    loadScript("smartadmin/js/plugin/jquery-form/jquery-form.min.js", pagefunction);


</script>